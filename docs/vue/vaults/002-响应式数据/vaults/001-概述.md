## 数据和状态

如果一个数据参与了界面渲染，并且当数据改变时，界面需要重新渲染，那么这个数据就可以被称为状态。

如果像Vue一样对状态进行了数据劫持，可以在修改数据的同时自动更新使用到该数据的界面，那么这个数据又可以被称为响应式状态。



## data

在Vue2中，data中定义的数据会被自动挂载到vue实例上，而只要是vue实例上存在的属性都可以直接在模板中使用, 无论是直接挂载到vue实例上，还是在data中定义的

他们的区别是，data中定义的数据在被挂载到组件实例上之前会经过数据劫持变成响应式数据，而直接挂载到组件实例上的数据不会经过数据阶层，所以其不是响应式的

```html
<div id="app">
  {{ x }} - {{ y }}
</div>

<script>
  // vue2中的Vue是类，vue3中的Vue是函数
  // 初始化Vue实例后，全局会注入vm变量表示vue实例
  const vm = new Vue({
    data: {
      // x是响应式的
      x: 10
    }
  })

  // y是非响应式的
  vm.y = 20

  vm.$mount('#app')
</script>
```



在Vue 2中，通过 `Object.defineProperty` 实现数据劫持，而在Vue 3中，则使用 `Proxy`。

无论哪种方式，都是通过拦截数据的 `getter` 和 `setter` 方法实现。

当获取数据时，会触发 `getter`，将使用数据的界面收集起来，成为状态的依赖；当设置属性时，不仅修改状态，还会通知对应的界面更新。

![image.png](https://s2.loli.net/2024/12/23/NLa1u7sVWQjPgCB.png) 

所以在 Vue 2 中,建议所有数据都在 `data` 中进行初始化,这样可以确保数据都是响应式的。

